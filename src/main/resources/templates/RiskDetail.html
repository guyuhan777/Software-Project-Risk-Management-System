<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">  
<head>
<meta charset="utf-8"></meta>
<link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"></link>
<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.0/bootstrap-table.min.css"></link>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.0/bootstrap-table.min.js"></script>
</head>
<style>
	*.text {color:rgba(252,252,252,1.00)}
</style>
<body th:background="@{/background.jpg}" style="background-size:cover">
	<div class="container" style="width:100%;">
		<div class="row">
            <ul class="nav nav-tabs">
            	<li style="margin-left:10px"><h4 class="text" style="color:rgba(252,252,252,1.00)">Welcome to Software_Risk_Project_Management_System</h4></li>
                <li style="float:right; margin-right:20px"><a class="text" href="#"> <span class="glyphicon glyphicon-log-out"> Exit</span></a></li>
  				<li style="float:right;"><a  class="text" href="#"> <span class="glyphicon glyphicon-user"> User</span></a></li>
                <li style="float:right;"><a  class="text" href="#"><span class="glyphicon glyphicon-home"> Home</span></a></li>
			</ul>
        </div>
        <div class="row">
			<ol class="breadcrumb" style="background:rgba(247,242,242,0.1); border-radius:10px;">
    			<li><a href="#">Home</a></li>
    			<li><a href="#">Risk Management</a></li>
    			<li class="text">Detail</li>
			</ol>
		</div>
		<div class="row" style="border-radius:10px;">
			<div class="col-sm-3" style="background:rgba(247,242,242,0.3); border-radius:10px;">	
				<ul class="nav nav-pills nav-stacked" style="margin-top:30px ; margin-bottom:420px">
						<li><a class="text" href="welcome"><span class="glyphicon glyphicon-adjust"> User Management</span></a></li>
						<li class="active"><a class="text" href="risk"><span class="glyphicon glyphicon-adjust"> Software Risk Management</span></a></li>
						<li><a class="text" href="check"><span class="glyphicon glyphicon-adjust"> Software Risk Plan Management</span></a></li>
						<li><a class="text" href="account"><span class="glyphicon glyphicon-adjust"> Statistical analysis </span></a></li>		
				</ul>
         	</div>
         	<div class="col-sm-9" style="background:rgba(252,252,252,0.4);border-radius:10px;">
         		<div class="row">
             		<ul class="nav nav-pills">
  						<li><a class="text" href="risk">Check all item</a></li>
  						<li><a class="text" href="add">Add item</a></li>
  						<li class="active"><a class="text" href="#">Detail</a></li>
					</ul>
             	</div>
             	<div class="row" style="background:rgba(252,252,252,0.9);border-radius:10px;">
             		<form class="form-horizontal" style="margin-top:20px" role="form">
             			<div class="form-group">
    						<label for="Number" class="col-sm-2 control-label">Number</label>
    						<div class="col-sm-5">
      							<input type="text" style="font-weight:bold" readOnly="true" class="form-control" id="Number" th:value="${risk.id}"></input>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Submitter</label>
    						<div class="col-sm-5">
      							<input type="text"  style="font-weight:bold" readOnly="true" class="form-control" id="Submitter" th:value="${risk.submitter.name}"></input>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Influence</label>
    						<div class="col-sm-5">
      							<input type="text"  readOnly="true" style="font-weight:bold" class="form-control" id="Influence" th:value="${risk.influence}"></input>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Possibility</label>
    						<div class="col-sm-5">
      							<input type="text" readOnly="true" style="font-weight:bold" class="form-control" id="Posibility" th:value="${risk.posibility}"></input>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Trigger</label>
    						<div class="col-sm-5">
      							<input type="text" readOnly="true" style="font-weight:bold" class="form-control" id="Trigger" th:value="${risk.riskTrigger}"></input>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Content</label>
    						<div class="col-sm-8">
    							<textarea readOnly="true" style="font-weight:bold" class="form-control" rows="3" th:utext="${risk.content}">lalala</textarea>
    						</div>
  						</div>
  						<div class="form-group">
    						<label class="col-sm-2 control-label">Followers</label>
    						<div class="col-sm-7">
    							<table  class="table table-striped table-bordered">
    								<thead>
    									<tr>
    										<th>Number</th>
    										<th>Name</th>
    									</tr>
    								</thead>
    								<tbody>
    									<tr  th:each="u : ${risk.Followers}" style="font-weight:bold">
    										<td th:text="${u.id}" > 1 </td>
    										<td th:text="${u.name}"> name </td>
    									</tr>
    								</tbody>
    							</table>
    						</div>
    						<div class="col-sm-3">
    							<input type="button" data-toggle="modal" data-target="#userModal" value="Add followers" style="background:rgba(159,219,139,1.00); height:30px; width:100px;border-radius:5px;font-weight:bold;color:#FCFCFC"></input>
    						</div>
  						</div>
  						<div class="form-group">
  							<label class="col-sm-2 control-label">States</label>
  							<div class="col-sm-7">
  								<table  class="table table-striped table-bordered">
  									<thead>
  										<tr>
    										<th>Number</th>
    										<th>RiskType</th>
    										<th>Description</th>
    										<th>CreatedAt</th>
    									</tr>
  									</thead>
  									<tbody>
    									<tr  th:each="state : ${risk.states}" style="font-weight:bold">
    										<td th:text="${state.id}" > 1 </td>
    										<td th:text="${state.riskType}"> Type </td>
    										<td th:text="${state.discription}">desc</td>
    										<td th:text="${state.createdAt}">date</td>
    									</tr>
    								</tbody>
  								</table>
  							</div>
  							<div class="col-sm-3">
    							<input type="button" data-toggle="modal" data-target="#StateModal" value="Add States" style="background:rgba(159,219,139,1.00); height:30px; width:100px; border-radius:5px;font-weight:bold;color:#FCFCFC"></input>
    						</div>
  						</div>
             		</form>
             	</div>
         	</div>
		</div>
		<div class="row" style="background:rgba(247,242,242,0.2); text-align:center; border-radius:10px;">
        	<h4 style="color:rgba(252,252,252,1.00)">copyright Â© Steins;Gate 2013 ~ 2016</h4>
        </div>
	</div>
	
	<div class="modal fade" id="userModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
                	<h4 class="modal-title">Add new follower</h4>
            	</div>
            	<div style="margin-top:20px">
            		<form class="form-horizontal" role="form">
            			<div class="form-group">
            				<label class="col-sm-2 control-label">Followers</label>
            				<div class="col-sm-7">
            					<table  class="table table-striped table-bordered" id="followerTable">
            						<thead>
  										<tr>
  											<th>Operation</th>
    										<th>Number</th>
    										<th>Name</th>
    									</tr>
  									</thead>
  									<tbody>
    									<tr th:each="fo : ${followers}" style="font-weight:bold">
    										<td> <input th:value="${fo.id}" type="checkbox"></input></td>
    										<td  th:text="${fo.id}"> 1 </td>
    										<td  th:text="${fo.name}"> name </td>
    									</tr>
    								</tbody>
            					</table>
            				</div>
            			</div>
            			<div class="form-group">
  							<div class="col-sm-2"></div>
             				<div class="col-sm-5">
                 				<div id="FoWarningMsg" class="alert alert-success" style="border-radius:10px; display:none"><h4 id = "warntext" style="color:#FCFCFC">There isn't such user</h4></div>
             				</div>
  						</div>
            		</form>
            	</div>
            	<div class="modal-footer">
                	<button type="button" class="btn btn-default" data-dismiss="modal"  onClick="re();">close</button>
                	<button type="button" class="btn btn-primary" id="foSubmit" onClick="addFollowers();">submit</button>
            	</div>
			</div>
		</div>
	</div>
	
	<div class="modal fade" id="StateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
                	<h4 class="modal-title">Add new state</h4>
            	</div>
            	<div style="margin-top:20px">
            		<form class="form-horizontal" role="form">
            			<div class="form-group">
    						<label class="col-sm-2 control-label">Description</label>
    						<div class="col-sm-8">
    							<textarea id="desc" style="font-weight:bold" class="form-control" rows="3" placeholder="Enter your description"></textarea>
    						</div>
  						</div>
  						<div class="form-group">
    						<label for="role" class="col-sm-2 control-label">State</label>
    						<div class="col-sm-10">
      							<label class="checkbox-inline">
    								<input type="radio" name="optionsRadiosinline" id="SAFE" value="0" checked="true">SAFE</input> 
  								</label>
  								<label class="checkbox-inline">
    						    	<input type="radio" name="optionsRadiosinline" id="RISK" value="1">RISK</input>
  								</label>
  								<label class="checkbox-inline">
    						    	<input type="radio" name="optionsRadiosinline" id="PROBLEM" value="2">PROBLEM</input>
  								</label>
    						</div>
  						</div>
  						<div class="form-group">
  							<div class="col-sm-2"></div>
             				<div class="col-sm-5">
                 				<div id="warningMsg" class="alert alert-success" style="border-radius:10px; display:none"><h4 id = "warntext" style="color:#FCFCFC">There isn't such user</h4></div>
             				</div>
  						</div>
  					</form>
  			    </div>
            	<div class="modal-footer">
                	<button type="button" class="btn btn-default" data-dismiss="modal"  onClick="re();">close</button>
                	<button type="button" class="btn btn-primary" id="submit" onClick="addState();">submit</button>
            	</div>
			</div>
		</div>
	</div>
</body>
<script>
$(function(){
	changeColor('#Influence');
	changeColor('#Posibility');
});

function addFollowers(){
	var followers = [];
	var rid = $('#Number').val();
	$(":checkbox:checked","#followerTable").each(function(){
		followers.push($(this).val());
	});
	var fstr = followers.toString();
	$.ajax({
		url:"Risk/addFollowers",
		type:"POST",
		data: {followers:fstr,rid:rid},
		dataType:"json",
		success: function(data){
			$("#FoWarningMsg").html("Add success");
			$("#FoWarningMsg").fadeIn("slow");
		}
		});
}

function re(){
	 window.location.reload();
}

function addState(){
	var desc = $('#desc').val();
	var state = 0;
	var rid = $('#Number').val();
	if($('#RISK').is(":checked")){
		state = 1;
	}
	if($('#PROBLEM').is(":checked")){
		state = 2;
	}
	$.ajax({
		url:"Risk/addState",
		type:"POST",
		data: {desc:desc,state:state,rid:rid},
		dataType:"json",
		success: function(data){
			$("#warningMsg").html("Add success");
			$("#warningMsg").fadeIn("slow");
		}
		});
}

function changeColor(id){
	if($(id).val() == 'HIGH'){
		$(id).css("color","red");
	}
	
	if($(id).val() == 'MEDIMU'){
		$(id).css("color","blue");
	}
	
	if($(id).val() == 'LOW'){
		$(id).css("color","green");
	}
}

</script>
</html>
